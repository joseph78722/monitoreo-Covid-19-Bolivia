acumulado <- datos$cases
acumulado <- acumulado$total
Prueba_casos <- read_csv("~/Downloads/Casos - Recuperados.csv", 
                         col_types = cols(Fecha = col_date(format = "%m/%d/%Y")))

Prueba_casos <- read_csv("Nuevos_casos.csv", 
                        col_types = cols(Fecha = col_date(format = "%m/%d/%Y")))

write.csv(Prueba_casos,"Nuevos_casos.csv", row.names = FALSE)
Prueba_casos$Fecha <- as.Date(Prueba_casos$Fecha)
head(Prueba_casos)

registro_nuevos <- datos$cases
registro_nuevos$new <- substr(registro_nuevos$new, star=2, stop=5)

registro_nuevos$new <- as.integer(registro_nuevos$new)
nuevo <- registro_nuevos$new

nuevas_muertes <- datos$deaths
nuevas_muertes$new <- substr(nuevas_muertes$new, star=2, stop=4)
nuevas_muertes <- nuevas_muertes$new

datos <- data$response
paste0("Actualizado: ", Sys.time())
str

url = "https://covid-193.p.rapidapi.com/statistics"

queryString <- list(country = "bolivia")

headers = add_headers(
  'x-rapidapi-host'= "covid-193.p.rapidapi.com",
  'x-rapidapi-key'= "27116f90b8msh7152626f9b46b5ep16ab32jsn17e2accf574c"
)

API <- GET(url, query = queryString,  headers)
###
#####Agregar datos
datos = fromJSON(rawToChar(API$content))
datos <- datos$response
fecha <- Sys.Date()



Confirmados_xts <- xts(total_Confirmados$Confirmados, order.by = total_Confirmados$Fecha, frequency = 1)
Fallecidos_xts <- xts(total_fallecidos$Fallecidos, order.by = total_fallecidos$Fecha, frequency = 1)
Recuperados_xts <- xts(total_recuperados$Recuperados, order.by = total_recuperados$Fecha, frequency = 1)
dinamico <- cbind(Confirmados_xts, Fallecidos_xts, Recuperados_xts)

grafico <- dygraph(dinamico, ylab = 'Cantidad',
                   main = 'Acumulado de casos confirmados, recuperaciones y decesos') %>% 
  dySeries('Confirmados_xts', label = 'Casos') %>% 
  dySeries('Fallecidos_xts', label = 'Fallecidos') %>% 
  dySeries('Recuperados_xts', label = 'Recuperados') %>% 
  dyOptions(colors = c('#0037A2', 'Black', '#00B50C')) %>% 
  dyRangeSelector(height = 20) %>% 
  dyOptions(strokeWidth = 2, pointSize = 2)

grafico
otro <-  fromJSON(rawToChar(API$content))


url = "https://boliviasegura.agetic.gob.bo/wp-content/json/api.php"
cifras <- GET(url)
cifras

datos = fromJSON(rawToChar(cifras$content))
departamento <- datos$departamento

La_Paz <- departamento[["lp"]] 
La_Paz <- La_Paz[["contador"]]   
La_Paz <-as.data.frame(La_Paz)
La_Paz$Departamento = "La Paz"

Cbba <- departamento[["cb"]] 
Cbba <- Cbba[["contador"]]   
Cbba <-as.data.frame(Cbba)
Cbba$Departamento = "Cochabamba"

Santa_Cruz <- departamento[["sc"]] 
Santa_Cruz  <- Santa_Cruz[["contador"]]   
Santa_Cruz  <-as.data.frame(Santa_Cruz )
Santa_Cruz $Departamento = "Santa Cruz"

Oruro <- departamento[["or"]] 
Oruro  <- Oruro[["contador"]]   
Oruro  <-as.data.frame(Oruro)
Oruro$Departamento = "Oruro"


Chuquisaca <- departamento[["ch"]] 
Chuquisaca  <- Chuquisaca[["contador"]]   
Chuquisaca  <-as.data.frame(Chuquisaca)
Chuquisaca$Departamento = "Chuquisaca"


Potosi <- departamento[["pt"]] 
Potosi <- Potosi[["contador"]]   
Potosi  <-as.data.frame(Potosi)
Potosi$Departamento = "PotosÃ­"

Tarija <- departamento[["tj"]] 
Tarija  <- Tarija[["contador"]]   
Tarija   <-as.data.frame(Tarija )
Tarija$Departamento = "Tarija"


Beni <- departamento[["bn"]] 
Beni  <- Beni[["contador"]]   
Beni   <-as.data.frame(Beni )
Beni$Departamento = "Beni"

Pando <- departamento[["pn"]] 
Pando   <- Pando [["contador"]]   
Pando    <-as.data.frame(Pando  )
Pando $Departamento = "Pando "
 Bolivia <- rbind(Santa_Cruz, La_Paz, Tarija, Cbba, Potosi, Beni, Pando, Chuquisaca, Oruro)
Bolivia %>% 
  arrange(desc(confirmados))
